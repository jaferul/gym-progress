import{r as a,a as $,j as e,c as D,L as j,m as z,b as C,n as B,t as y,o as K,p as O,q as V,v as W,w as _,x as G,y as H}from"./index-Cw4i6T0x.js";import{I as l,B as b}from"./input--H4kzCxD.js";import{C as P,a as S,c as E,b as k,f as F,e as J}from"./card-BfXiogcm.js";import{L as c}from"./label-B1ejfijv.js";import{c as Q}from"./index-Dd-zHgbD.js";/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],R=Q("Eye",X);function Y({className:t,...n}){const[i,o]=a.useState(""),[d,x]=a.useState(""),[m,g]=a.useState(""),f=$(),w=r=>{r.preventDefault(),g(""),z(C,i,d).then(()=>{f({to:"/"})}).catch(u=>{const v=u.code,N=u.message;g(`Error signing in: ${N} 
 Error code: ${v}`)})};return e.jsx("div",{className:D("flex flex-col gap-6",t),...n,children:e.jsxs(P,{children:[e.jsxs(S,{children:[e.jsx(E,{children:"Login to your account"}),e.jsx(k,{children:"Enter your email below to login to your account"})]}),e.jsx(F,{children:e.jsxs("form",{onSubmit:w,children:[e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"grid gap-3",children:[e.jsx(c,{htmlFor:"email",children:"Email"}),e.jsx(l,{id:"email",type:"email",placeholder:"m@example.com",required:!0,onChange:r=>o(r.target.value)})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(c,{htmlFor:"password",children:"Password"}),e.jsx(j,{className:"ml-auto inline-block text-sm underline-offset-4 hover:underline",from:"/sign-in",search:r=>({...r,resetPassword:!0}),children:"Forgot your password?"})]}),e.jsx(l,{id:"password",type:"password",required:!0,onChange:r=>x(r.target.value)})]}),m&&e.jsx("div",{className:"py-2 text-center text-sm bg-[#9c2b2e] border-[#e84e4f] rounded-md",children:m}),e.jsx("div",{className:"flex flex-col gap-3",children:e.jsx(b,{type:"submit",className:"w-full",children:"Login"})})]}),e.jsxs("div",{className:"mt-4 text-center text-sm",children:["Don't have an account?"," ",e.jsx(j,{className:"underline underline-offset-4",from:"/sign-in",search:r=>({...r,newUser:!0}),children:"Sign up"})]})]})})]})})}const Z=()=>{const[t,n]=a.useState(""),i=o=>{o.preventDefault(),B(C,t).then(()=>{y("Reset password email sent",{description:`A reset password email has been sent to ${t}. Please check your inbox.`,action:{label:"OK",onClick:()=>{}}}),n("")}).catch(d=>{const x=d.code,m=d.message;y.error(`Error sending reset password email: ${m} 
 Error code: ${x}`)})};return e.jsxs(P,{children:[e.jsxs(S,{children:[e.jsx(E,{children:"Reset your password"}),e.jsx(k,{children:"Please enter your email address and we will send you a link to reset your password."})]}),e.jsx(F,{children:e.jsx("form",{onSubmit:i,children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"grid gap-3",children:[e.jsx(c,{htmlFor:"email",children:"Email"}),e.jsx(l,{id:"email",type:"email",required:!0,onChange:o=>n(o.target.value),value:t})]}),e.jsx(b,{disabled:!t,type:"submit",className:"w-full",children:"Reset Password"})]})})}),e.jsx(J,{children:e.jsx(j,{className:"inline-block text-sm underline-offset-4 hover:underline",from:"/sign-in",search:o=>({...o,resetPassword:void 0}),children:"Back to sign in"})})]})};function ee({className:t,...n}){const[i,o]=a.useState(""),[d,x]=a.useState(""),[m,g]=a.useState(""),[f,w]=a.useState(""),[r,u]=a.useState(""),[v,N]=a.useState(""),I=$(),[q,A]=a.useState(!1),[L,T]=a.useState(!1),M=s=>{if(s.preventDefault(),u(""),f!==m){u("Passwords do not match");return}K(C,d,m).then(p=>{const h=p.user;O(V(W,"users",h.uid),{name:i,email:d,goalCalories:Number(v)||0}),_(h,{displayName:i}),G(h).then(()=>{y("Verify your email",{description:`A verification email has been sent to ${h.email}. Please check your inbox.`,action:{label:"OK",onClick:()=>{}}})}),I({to:"/profile"})}).catch(p=>{const h=p.code,U=p.message;u(`Error signing up: ${U} 
 Error code: ${h}`)})};return e.jsx("div",{className:D("flex flex-col gap-6",t),...n,children:e.jsxs(P,{children:[e.jsxs(S,{children:[e.jsx(E,{children:"Create an account"}),e.jsx(k,{children:"Enter your details below to create an account"})]}),e.jsx(F,{children:e.jsxs("form",{onSubmit:M,children:[e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"grid gap-3",children:[e.jsx(c,{htmlFor:"name",children:"Name"}),e.jsx(l,{id:"name",type:"text",required:!0,onChange:s=>o(s.target.value)})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsx(c,{htmlFor:"email",children:"Email"}),e.jsx(l,{id:"email",type:"email",placeholder:"m@example.com",required:!0,onChange:s=>x(s.target.value)})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsx(c,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(l,{id:"password",type:q?"text":"password",required:!0,onChange:s=>g(s.target.value)}),e.jsx(R,{role:"button",onClick:()=>A(!q),height:20,width:20,className:"absolute top-[8px] right-[8px] cursor-pointer z-2 hover:bg-primary/40"})]})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsx(c,{htmlFor:"confirmPassword",children:"Confirm password"}),e.jsxs("div",{className:"relative",children:[e.jsx(l,{id:"confirmPassword",type:L?"text":"password",required:!0,onChange:s=>w(s.target.value)}),e.jsx(R,{role:"button",height:20,width:20,className:"absolute top-[8px] right-[8px] cursor-pointer z-2 hover:bg-primary/40",onClick:()=>T(!L)})]})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsx(c,{htmlFor:"goalCalories",children:"Calories goal"}),e.jsx(l,{id:"goalCalories",type:"number",required:!0,onChange:s=>N(s.target.value)})]}),r&&e.jsx("div",{className:"py-2 text-center text-sm bg-[#9c2b2e] border-[#e84e4f] rounded-md",children:r}),e.jsx(b,{type:"submit",className:"w-full cursor-pointer",children:"Create account"})]}),e.jsxs("div",{className:"mt-4 text-center text-sm",children:["Already have an account?"," ",e.jsx(j,{className:"underline underline-offset-4",from:"/sign-in",search:s=>({...s,newUser:void 0}),children:"Sign in"})]})]})})]})})}const ne=function(){const{newUser:n,resetPassword:i}=H.useSearch();return e.jsx("div",{className:"flex min-h-svh w-full items-center justify-center p-6 md:p-10",children:e.jsx("div",{className:"w-full max-w-sm",children:i?e.jsx(Z,{}):n?e.jsx(ee,{}):e.jsx(Y,{})})})};export{ne as component};
