import{j as e,c as d,u as g,r as o,w as v,q as j,v as y,p as N,t as i,x as w}from"./index-Cw4i6T0x.js";import{c as C,d as b}from"./index-Dd-zHgbD.js";import{A as k,a as A,b as E}from"./avatar-Da0CyWer.js";import{I as n,B as f}from"./input--H4kzCxD.js";import{C as F,a as P,c as V,f as S,e as _}from"./card-BfXiogcm.js";import{L as c}from"./label-B1ejfijv.js";import"./index-yIWh8jzV.js";/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],I=C("CircleAlert",q),R=b("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function $({className:s,variant:a,...r}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:d(R({variant:a}),s),...r})}function D({className:s,...a}){return e.jsx("div",{"data-slot":"alert-title",className:d("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",s),...a})}function L({className:s,...a}){return e.jsx("div",{"data-slot":"alert-description",className:d("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",s),...a})}const M=function(){const{user:a,goalCalories:r}=g(),[l,m]=o.useState((a==null?void 0:a.displayName)||""),[x,u]=o.useState(r||"");o.useEffect(()=>{m((a==null?void 0:a.displayName)||""),u(r||"")},[a,r]);const h=async()=>{try{if(!a||!a.uid)throw new Error("User must be logged in to update profile.");if(!a.emailVerified)throw new Error("Email must be verified to update profile.");await v(a,{displayName:l});const t=j(y,"users",a.uid);await N(t,{displayName:l,goalCalories:Number(x)},{merge:!0}),i.success("Profile updated successfully!")}catch(t){console.error("Error updating profile:",t),i.error(`Failed to update profile: ${t.message}`)}},p=()=>{a&&w(a).then(()=>{i("New verification email",{description:`A new verification email has been sent to ${a.email}. Please check your inbox.`,action:{label:"OK",onClick:()=>{}}})}).catch(t=>{i.error(`Error sending verification email to: ${a.email} 
 ${t.message}`)})};return e.jsx("div",{className:"container mx-auto px-4 py-6 md:px-6 2xl:max-w-[1400px]",children:e.jsxs("div",{className:"mx-auto max-w-4xl flex flex-col items-center",children:[e.jsxs("div",{className:"mb-8 flex items-center gap-6",children:[e.jsxs(k,{className:"relative flex shrink-0 overflow-hidden rounded-full size-20",children:[e.jsx(A,{src:"https://github.com/shadcn.png"}),e.jsx(E,{children:"CN"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Account Settings"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Manage your account settings and preferences"})]})]}),e.jsxs(F,{className:"w-full max-w-sm",children:[e.jsx(P,{children:e.jsx(V,{children:"Profile details"})}),e.jsx(S,{children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"name",children:"Name"}),e.jsx(n,{id:"name",type:"text",placeholder:"Pick a name",value:l,onChange:t=>m(t.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"email",children:"Email"}),e.jsx(n,{id:"email",type:"text",placeholder:"m@example.com",value:(a==null?void 0:a.email)||"",readOnly:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"goalCalories",children:"Calories goal"}),e.jsx(n,{id:"goalCalories",type:"number",value:x,onChange:t=>u(t.target.value)})]})]})}),e.jsx(_,{children:e.jsx(f,{className:"w-full",onClick:h,children:"Save changes"})})]}),a&&!a.emailVerified&&e.jsxs($,{variant:"destructive",className:"w-full max-w-xl mt-6",children:[e.jsx(I,{}),e.jsx(D,{children:"Verify your email"}),e.jsxs(L,{children:[e.jsx("p",{children:"Please verify your email in order to use the features of this website."}),e.jsxs("ul",{className:"list-inside list-disc text-sm",children:[e.jsx("li",{children:"Check your inbox for the verification email including the spam folder"}),e.jsx("li",{children:"Follow the link provided to verify your email"}),e.jsx("li",{children:"You can request a new link using the button below"})]}),e.jsx(f,{className:"w-auto mt-6",onClick:p,children:"Request new verification email"})]})]})]})})};export{M as component};
